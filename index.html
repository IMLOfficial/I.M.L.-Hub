<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#4db8ff">
<title>I.M.L. Official</title>

<link rel="manifest" href="manifest.json">

<style>
:root{
  --bg:#eef7ff;
  --text:#0a1a2a;
  --accent:#4db8ff;
}

[data-theme="dark"]{
  --bg:#0b1220;
  --text:#e9f4ff;
}

*{margin:0;box-sizing:border-box;font-family:system-ui,Segoe UI,sans-serif}

body{
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

/* ===== INTRO ===== */
#intro{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99;
  animation:introFade 2.5s forwards;
}

@keyframes introFade{
  0%{opacity:1}
  80%{opacity:1}
  100%{opacity:0;pointer-events:none}
}

#intro img{
  width:140px;
  animation:logoPop 2s ease;
}

@keyframes logoPop{
  0%{transform:scale(.5);opacity:0}
  100%{transform:scale(1);opacity:1}
}

/* ===== Background ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:-1;
}

/* ===== Header ===== */
header{
  display:flex;
  align-items:center;
  gap:15px;
  padding:25px;
}

.logo-wrap{
  position:relative;
}

.logo-wrap img{
  width:70px;
  z-index:2;
  position:relative;
}

.wave{
  position:absolute;
  bottom:-10px;
  left:50%;
  transform:translateX(-50%);
}

/* ===== Controls ===== */
.controls{
  display:flex;
  gap:10px;
  padding:0 25px;
}

.controls button{
  padding:10px 18px;
  border:none;
  border-radius:25px;
  background:linear-gradient(135deg,var(--accent),#89d6ff);
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* ===== Socials ===== */
.socials{
  display:flex;
  gap:15px;
  padding:20px 25px;
}

.socials a{
  text-decoration:none;
  padding:12px 22px;
  border-radius:30px;
  background:linear-gradient(135deg,var(--accent),#89d6ff);
  color:white;
  font-weight:bold;
}

/* ===== Sections ===== */
section{padding:40px 25px}

.videos{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;
}

iframe{
  width:100%;
  height:200px;
  border:none;
  border-radius:16px;
}

/* ===== Downloads ===== */
.downloads{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  justify-content:center;
}

.downloads a{
  padding:15px 30px;
  border-radius:30px;
  background:linear-gradient(135deg,var(--accent),#89d6ff);
  color:white;
  font-weight:bold;
  text-decoration:none;
}

footer{text-align:center;padding:30px;opacity:.6}
</style>
</head>

<body>

<div id="intro">
  <img src="logo.png" alt="I.M.L Logo">
</div>

<canvas id="bg"></canvas>

<header>
  <div class="logo-wrap">
    <img src="logo.png" alt="I.M.L Logo">
    <svg class="wave" width="80" height="20">
      <polyline id="waveLine" points="0,10 10,10 20,10 30,10 40,10 50,10 60,10 70,10 80,10"
        fill="none" stroke="#4db8ff" stroke-width="2"/>
    </svg>
  </div>
  <h1>I.M.L.</h1>
</header>

<div class="controls">
  <button onclick="toggleTheme()">Light / Dark</button>
  <button onclick="enableAudio()">Sound Reactive</button>
</div>

<div class="socials">
  <a href="https://youtube.com/@i.m.l._official" target="_blank">YouTube</a>
  <a href="https://www.tiktok.com/@i.m.l._official" target="_blank">TikTok</a>
</div>

<section>
  <h2>Live Stream</h2>
  <iframe src="https://www.youtube.com/embed/live_stream?channel=UCes-oJI1M7Rr6oWIofhK6fg" allowfullscreen></iframe>
</section>

<section>
  <h2>Latest Videos</h2>
  <div class="videos" id="videos"></div>
</section>

<section>
  <h2>Download</h2>
  <div class="downloads">
    <a href="#">Windows</a>
    <a href="#">Android</a>
    <a href="#">iOS</a>
  </div>
</section>

<footer>Â© 2026 I.M.L. Official</footer>

<script>
/* ===== Theme ===== */
function toggleTheme(){
  document.body.dataset.theme =
    document.body.dataset.theme==="dark"?"":"dark";
}

/* ===== Background ===== */
const canvas=document.getElementById("bg"),ctx=canvas.getContext("2d");
let w,h,particles=[],audioLevel=0;

function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight}
addEventListener("resize",resize);resize();

for(let i=0;i<100;i++)particles.push({x:Math.random()*w,y:Math.random()*h,s:Math.random()*1.5+.5});

function draw(){
  ctx.clearRect(0,0,w,h);
  particles.forEach(p=>{
    p.y-=p.s+audioLevel*6;
    if(p.y<0)p.y=h;
    ctx.fillStyle="rgba(77,184,255,.6)";
    ctx.beginPath();
    ctx.arc(p.x,p.y,2+audioLevel*4,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(draw);
}
draw();

/* ===== Audio + Wave ===== */
async function enableAudio(){
  const stream=await navigator.mediaDevices.getUserMedia({audio:true});
  const ac=new AudioContext(),an=ac.createAnalyser();
  ac.createMediaStreamSource(stream).connect(an);
  const data=new Uint8Array(an.frequencyBinCount);
  const wave=document.getElementById("waveLine");

  function loop(){
    an.getByteFrequencyData(data);
    audioLevel=data.reduce((a,b)=>a+b)/data.length/255;

    let pts=[];
    for(let i=0;i<9;i++){
      pts.push(`${i*10},${10-Math.random()*audioLevel*10}`);
    }
    wave.setAttribute("points",pts.join(" "));
    requestAnimationFrame(loop);
  }
  loop();
}

/* ===== YouTube Feed ===== */
fetch("https://www.youtube.com/feeds/videos.xml?channel_id=UCes-oJI1M7Rr6oWIofhK6fg")
.then(r=>r.text())
.then(t=>new DOMParser().parseFromString(t,"text/xml"))
.then(xml=>{
  const box=document.getElementById("videos");
  [...xml.querySelectorAll("entry")].slice(0,12).forEach(e=>{
    const id=e.querySelector("yt\\:videoId").textContent;
    box.innerHTML+=`<iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>`;
  });
});

/* ===== Service Worker ===== */
if("serviceWorker"in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
