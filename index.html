<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#4db8ff">
<title>I.M.L. Official</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">

<style>
:root{
  --bg:#eef7ff;
  --text:#0a1a2a;
  --accent:#4db8ff;
}

[data-theme="dark"]{
  --bg:#0b1220;
  --text:#e9f4ff;
}

*{
  margin:0;
  box-sizing:border-box;
  font-family:system-ui,Segoe UI,sans-serif;
}

body{
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}

/* ===== Animated Background ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:-1;
}

/* ===== Header ===== */
header{
  display:flex;
  align-items:center;
  gap:15px;
  padding:25px;
}

header img{
  width:70px;
}

header h1{
  font-size:2rem;
  letter-spacing:3px;
}

/* ===== Controls ===== */
.controls{
  display:flex;
  gap:10px;
  padding:0 25px;
}

.controls button{
  padding:10px 18px;
  border:none;
  border-radius:25px;
  background:linear-gradient(135deg,var(--accent),#89d6ff);
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* ===== Socials ===== */
.socials{
  display:flex;
  gap:15px;
  padding:20px 25px;
}

.socials a{
  text-decoration:none;
  padding:12px 22px;
  border-radius:30px;
  background:linear-gradient(135deg,var(--accent),#89d6ff);
  color:white;
  font-weight:bold;
}

/* ===== Sections ===== */
section{
  padding:35px 25px;
}

.videos{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:20px;
}

iframe{
  width:100%;
  height:200px;
  border:none;
  border-radius:16px;
}

/* ===== Downloads ===== */
.downloads{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  justify-content:center;
}

.downloads a{
  padding:15px 30px;
  border-radius:30px;
  background:linear-gradient(135deg,var(--accent),#89d6ff);
  color:white;
  font-weight:bold;
  text-decoration:none;
}

footer{
  text-align:center;
  padding:30px;
  opacity:.6;
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<header>
  <img src="logo.png" alt="I.M.L Logo">
  <h1>I.M.L.</h1>
</header>

<div class="controls">
  <button onclick="toggleTheme()">Light / Dark</button>
  <button onclick="enableAudio()">Sound Reactive</button>
</div>

<div class="socials">
  <a href="https://youtube.com/@i.m.l._official" target="_blank">YouTube</a>
  <a href="https://www.tiktok.com/@i.m.l._official" target="_blank">TikTok</a>
</div>

<section>
  <h2>Latest Videos</h2>
  <div class="videos" id="videos"></div>
</section>

<section>
  <h2>Download</h2>
  <div class="downloads">
    <a href="#">Windows</a>
    <a href="#">Android</a>
    <a href="#">iOS</a>
  </div>
</section>

<footer>
  Â© 2026 I.M.L. Official
</footer>

<script>
/* ===== Theme ===== */
function toggleTheme(){
  document.body.dataset.theme =
    document.body.dataset.theme === "dark" ? "" : "dark";
}

/* ===== Animated Background ===== */
const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");
let w,h,particles=[],audioLevel=0;

function resize(){
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;
}
addEventListener("resize",resize);
resize();

for(let i=0;i<90;i++){
  particles.push({
    x:Math.random()*w,
    y:Math.random()*h,
    s:Math.random()*1.5+0.5
  });
}

function draw(){
  ctx.clearRect(0,0,w,h);
  particles.forEach(p=>{
    p.y -= p.s + audioLevel*6;
    if(p.y < 0) p.y = h;
    ctx.fillStyle = "rgba(77,184,255,0.7)";
    ctx.beginPath();
    ctx.arc(p.x,p.y,2 + audioLevel*5,0,Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(draw);
}
draw();

/* ===== Audio Reactive ===== */
async function enableAudio(){
  const stream = await navigator.mediaDevices.getUserMedia({audio:true});
  const ctxAudio = new AudioContext();
  const analyser = ctxAudio.createAnalyser();
  ctxAudio.createMediaStreamSource(stream).connect(analyser);
  const data = new Uint8Array(analyser.frequencyBinCount);

  function loop(){
    analyser.getByteFrequencyData(data);
    audioLevel = data.reduce((a,b)=>a+b) / data.length / 255;
    requestAnimationFrame(loop);
  }
  loop();
}

/* ===== YouTube Auto Feed ===== */
const CHANNEL_ID = "UCes-oJI1M7Rr6oWIofhK6fg";
const MAX_VIDEOS = 12;

fetch(`https://www.youtube.com/feeds/videos.xml?channel_id=${CHANNEL_ID}`)
  .then(res => res.text())
  .then(text => new DOMParser().parseFromString(text,"text/xml"))
  .then(xml => {
    const entries = xml.querySelectorAll("entry");
    const box = document.getElementById("videos");

    [...entries].slice(0, MAX_VIDEOS).forEach(entry=>{
      const id = entry.querySelector("yt\\:videoId").textContent;
      const iframe = document.createElement("iframe");
      iframe.src = `https://www.youtube.com/embed/${id}`;
      iframe.allowFullscreen = true;
      box.appendChild(iframe);
    });
  });

/* ===== Service Worker ===== */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
